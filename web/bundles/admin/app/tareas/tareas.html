<!-- BEGIN PAGE HEADER-->
<div class="page-bar">
    <ul class="page-breadcrumb">
        <li>
            <i class="fa fa-home"></i>
            <a href="#/dashboard">Inicio</a>
            <i class="fa fa-angle-right"></i>
        </li>
        <li>
            <a href="#">Tareas</a>
        </li>
    </ul>
</div>
<h3 class="page-title">
    Administrar las tareas
</h3>


<!-- END PAGE HEADER-->
<!-- BEGIN MAIN CONTENT -->
<div class="row" id="lista-tarea">
    <div class="col-lg-12">
        <div class="portlet light">
            <div class="portlet-title">
                <div class="caption caption-md">
                    <i class="icon-doc font-apolo-sharp"></i>
                    <span class="caption-subject font-apolo-haze bold uppercase">{{ titulo}}</span>
                </div>
                <div class="actions">
                    <a href="javascript:;" class="btn btn-circle btn-icon-only btn-default fullscreen"
                       data-original-title="" title="">
                    </a>
                </div>
            </div>
            <div class="portlet-body">
                <div class="table-toolbar" ng-if="vm.mostrarNuevo">
                    <div class="row">
                        <div class="col-md-12"
                             data-ng-include="vm.urlPath + '/bundles/admin/app/layout/acciones-lista.html'"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="col-md-6" id="select-nivel-alerta">
                            <select data-ds-select2 class="form-control selectpicker" id="nivel-alerta" name="nivel-alerta" ng-model="nivelAlerta" ng-change="vm.seleccionarElemento({criticidad:true,cargo:false,area:false,direccion:false});">
                                <option value="">Seleccione nivel de alerta</option>
                                <option data-ng-repeat="item in vm.criticidades" value="{{item.criticidad_id}}">{{item.nombre}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div style="margin-bottom: 20px;"></div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="col-md-3" id="select-direccion" ng-if="vm.usuario.rol === 1">
                            <select data-ds-select2 class="form-control selectpicker" id="direccion" name="direccion" ng-model="direccion" ng-change="vm.seleccionarElemento({criticidad:false,cargo:false,area:false,direccion:true});">
                                <option value="">Seleccione la dirección</option>
                                <option data-ng-repeat="item in vm.gerencias" value="{{item.gerencia_id}}">{{item.descripcion}}</option>
                            </select>
                        </div>
                        <div class="col-md-3" id="select-gerencia-filtro" ng-if="vm.usuario.rol === 1">
                            <select data-ds-select2 class="form-control selectpicker" id="gerencia-filtro" name="gerencia" ng-model="gerencia" ng-change="vm.seleccionarElemento({criticidad:false,cargo:false,area:true,direccion:false});">
                                <option value="">Seleccione la gerencia</option>
                                <option data-ng-repeat="item in vm.areas" value="{{item.area_id}}">{{item.nombre}}</option>
                            </select>
                        </div>
                        <div class="col-md-3" id="select-cargo-filtro" ng-if="vm.usuario.rol === 1">
                            <select data-ds-select2 class="form-control selectpicker" id="cargo-filtro" name="cargo" ng-model="cargo" ng-change="vm.seleccionarElemento({criticidad:false,cargo:true,area:false,direccion:false});">
                                <option value="">Seleccione el cargo</option>
                                <option data-ng-repeat="item in vm.cargos" value="{{item.cargo_id}}">{{item.nombre}}</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <div class="input-group">
                                    <button
                                            class="btn btn-primary"
                                            type="button" ng-click="vm.filtarTareasCargo()">
                                        <i class="fa fa-search fa-fw"></i> Ver Tareas
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="table-container">
                    <table class="table table-striped table-bordered table-hover dt-responsive" id="tarea-table-editable">
                        <thead>
                            <tr>
                                <th class="table-checkbox all">
                                    <input type="checkbox" class="group-checkable"
                                           data-set="#tarea-table-editable .checkboxes"/>
                                </th>
                                <th class="all">Código</th>
                                <th class="min-tablet">Nombre</th>
                                <th class="desktop">Cargo</th>
                                <th class="desktop">Nivel de Alerta</th>
                                <th class="all">Hito</th>
                                <th class="min-tablet">Acciones</th>
                            </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row ng-hide" id="form-tarea">
    <div class="col-lg-12">
        <div class="portlet light">
            <div class="portlet-title">
                <div class="caption caption-md">
                    <i class="icon-bar-chart font-apolo-haze hide"></i>
                    <span class="caption-subject font-apolo-haze bold uppercase" id="form-tarea-title">¿Deseas crear una nueva tarea? Sigue los siguientes pasos:</span>
                    <span class="caption-helper"></span>
                </div>
                <div class="actions">
                    <a href="javascript:;" class="btn btn-circle btn-icon-only btn-default fullscreen"
                       data-original-title="" title="">
                    </a>
                    <a href="javascript:;" class="btn btn-circle btn-icon-only btn-default my-remove"
                       data-ng-click="vm.cerrarForm()">
                        <i class="fa fa-times fa"></i>
                    </a>
                </div>
            </div>
            <div class="portlet-body form">
                <div class="row">
                    <div class="col-lg-12">
                        <uib-tabset>
                            <uib-tab heading="General" id="tab-general">
                                <form class="" id="tarea-form" enctype="multipart/form-data" method="post">

                                    <input type="hidden" id="tarea_id" name="tarea_id"/>

                                    <div class="form-body">

                                        <div class="form-group ic-form-group">
                                            <key>
                                                <span class="ic-step-number">1</span>
                                                Para comenzar, ingrese el código de la tarea
                                                <span class="ic-small italic">(opcional)</span>
                                            </key>
                                            <p class="help-block"></p>
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <input type="text" class="form-control" id="codigo" name="codigo"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group ic-form-group">
                                            <key>
                                                <span class="ic-step-number">2</span>
                                                A continuación, ingrese el nombre de la tarea
                                                <span class="ic-small italic">(obligatorio)</span>
                                            </key>
                                            <p class="help-block">Es muy importante que elijas un nombre claro y representativo de tu tarea.</p>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <input type="text" class="form-control" id="nombre" name="nombre"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group ic-form-group">
                                            <key>
                                                <span class="ic-step-number">3</span>
                                                Seguidamente, seleccione el nivel de alerta de la tarea
                                                <span class="ic-small italic">(obligatorio)</span>
                                            </key>
                                            <p class="help-block"></p>
                                            <div class="row">
                                                <div class="col-md-6" id="select-criticidad">
                                                    <select data-ds-select2 class="form-control selectpicker" multiple
                                                            data-live-search="true" id="criticidad">
                                                        <option value="">Seleccione</option>
                                                        <option data-ng-repeat="item in vm.criticidades track by $index"
                                                                value="{{item.criticidad_id}}">{{item.nombre}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group ic-form-group">
                                            <key>
                                                <span class="ic-step-number">4</span>
                                                Luego, seleccione un cargo para la tarea <span class="ic-small italic">(opcional)</span>
                                            </key>
                                            <p class="help-block"></p>
                                            <div class="row">
                                                <div class="col-md-4" id="select-gerencia">
                                                    <key>Dirección</key>
                                                    <select data-ds-select2 class="form-control selectpicker"
                                                            id="gerencia"
                                                            name="gerencia">
                                                        <option value="">Seleccione</option>
                                                        <option data-ng-repeat="item in vm.gerencias"
                                                                value="{{item.gerencia_id}}">{{item.descripcion}}
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="col-md-4" id="select-area">
                                                    <key>Gerencia</key>
                                                    <select data-ds-select2 class="form-control selectpicker" id="area"
                                                            name="area">
                                                        <option value="">Seleccione</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-4" id="select-cargo">
                                                    <key>Cargo</key>
                                                    <select data-ds-select2 class="form-control selectpicker" id="cargo"
                                                            name="cargo">
                                                        <option value="">Seleccione</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group ic-form-group">
                                            <key>
                                                <span class="ic-step-number">5</span>
                                                Luego, ingrese las observaciones de la tarea
                                                <span class="ic-small italic">(opcional)</span>
                                            </key>
                                            <p class="help-block">Ingrese las observaciones sobre la tarea.</p>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <textarea type="text" class="form-control ckeditor" id="editor"
                                                              name="editor" rows="6"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group ic-form-group">
                                            <key>
                                                <span class="ic-step-number">6</span>
                                                Luego, seleccione el canal
                                                <span class="ic-small italic">(opcional)</span>
                                            </key>
                                            <p class="help-block"></p>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <select data-ds-select2 class="form-control selectpicker" id="canal" name="canal">
                                                        <option value="">Seleccione el canal</option>
                                                        <option data-ng-repeat="item in vm.canales"
                                                                value="{{item.canal_id}}">{{item.descripcion}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group ic-form-group">
                                            <key>
                                                <span class="ic-step-number">6</span>
                                                Luego, seleccione el estado de la tarea
                                                <span class="ic-small italic">(opcional)</span>
                                            </key>
                                            <p class="help-block"></p>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <select data-ds-select2 class="form-control selectpicker" id="estado" name="estado">
                                                        <option value="">Seleccione el estado de la tarea</option>
                                                        <option data-ng-repeat="item in vm.estadosTareas"
                                                                value="{{item.estado_id}}">{{item.nombre}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group ic-form-group">
                                            <key>
                                                <span class="ic-step-number">7</span>
                                                Inserte el nombre del producto de la tarea<span
                                                    class="ic-small italic">(obligatorio)</span>
                                            </key>
                                            <p class="help-block">Nombre del producto de la tarea</p>
                                            <div class="row">
                                                <div class="col-md-6" id="select-estado-tarea">
                                                    <input type="text" class="form-control" id="producto" name="producto"/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group ic-form-group">
                                            <key><span class="ic-step-number">8</span>Define si la tarea será recurrente</key>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="form-group">
                                                        <key class="radio-inline">
                                                            <input type="radio" name="radiorecurrente"
                                                                   id="recurrenteactivo">
                                                            <span class="ic-small">SI</span>
                                                        </key>
                                                        <key class="radio-inline">
                                                            <input type="radio" name="radiorecurrente"
                                                                   id="recurrenteinactivo" checked>
                                                            <span class="ic-small">NO</span>
                                                        </key>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group ic-form-group">
                                            <key><span class="ic-step-number">9</span>A continuación, define si la tarea será un hito de la tarea</key>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="form-group">
                                                        <key class="radio-inline">
                                                            <input type="radio" name="radiohito" id="hitoactivo">
                                                            <span class="ic-small">Si</span>
                                                        </key>
                                                        <key class="radio-inline">
                                                            <input type="radio" name="radiohito" id="hitoinactivo" checked>
                                                            <span class="ic-small">No</span>
                                                        </key>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </uib-tab>
                            <uib-tab heading="Archivos del Producto" id="tab-modelo">
                                <div class="row  margin-bottom-30" style="margin-top: 30px;">
                                    <div class="col-lg-12">
                                        <div class="btn-group">
                                            <button class="btn green" data-ng-click="vm.nuevoModelo()">
                                                Nuevo <i class="fa fa-plus"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="space20"></div>
                                        <table class="table table-advance table-bordered table-hover table-striped"
                                               id="table-modelos">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Nombre</th>
                                                    <th>Descripción</th>
                                                    <th>Estado</th>
                                                    <th class="text-center">Acciones</th>
                                                </tr>
                                            </thead>
                                            <tbody>

                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </uib-tab>
                        </uib-tabset>

                        <div class="form-actions">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group ic-form-group">
                                        <button data-ng-click="vm.salvarForm()" class="btn green" type="button">
                                            Guardar
                                        </button>
                                        <button data-ng-click="vm.cerrarForm()" class="btn red" type="button">
                                            Cancelar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal-modelo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" id=ventana-titulo" style="border-top-width: 20px">
            <div class="modal-header blue-hoki">
                <button aria-hidden="true" data-dismiss="modal" class="close" type="button"></button>
                <h4 class="modal-title">Agregar archivo</h4>
            </div>
            <div class="modal-body">
                <form class="" id="modelo-form" action="tarea/salvarModelo"
                      enctype="multipart/form-data" method="post">
                    <div class="form-body">
                        <div class="form-group ic-form-group">
                            <key>
                                <span class="ic-step-number">1</span>
                                Para comenzar, seleccione el archivo de la tarea <span
                                    class="ic-small italic">(obligatorio)</span>
                            </key>
                            <p class="help-block" translate>
                                Se admiten los siguentes formatos: Word - Presentaciones - Pdf - Excel - Imagenes - ZIP - RAR
                            </p>
                            <div class="row">
                                <div class="col-xs-8">
                                    <div id="fileinput-archivo" class="fileinput fileinput-new"
                                         data-provides="fileinput">
                                        <div class="input-group">
                                            <div class="form-control uneditable-input input-fixed"
                                                 data-trigger="fileinput">
                                                <i class="fa fa-file fileinput-exists"></i>&nbsp; <span
                                                    class="fileinput-filename">
                                                </span>
                                            </div>
                                            <span class="input-group-addon btn default btn-file">
                                                <span class="fileinput-new">
                                                    Seleccione
                                                </span>
                                                <span class="fileinput-exists">
                                                    Cambiar
                                                </span>
                                                <input type="file" name="file" id="file" required>
                                            </span>
                                            <a href="javascript:;"
                                               class="input-group-addon btn red fileinput-exists"
                                               data-dismiss="fileinput">
                                                Eliminar
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group ic-form-group">
                            <key>
                                <span class="ic-step-number">2</span>
                                A continuación, ingrese el nombre del archivo <span
                                    class="ic-small italic">(obligatorio)</span>
                            </key>
                            <p class="help-block"></p>
                            <div class="row">
                                <div class="col-md-12">
                                    <input type="text" class="form-control" id="modelo-nombre"
                                           name="nombre">
                                </div>
                            </div>
                        </div>
                        <div class="form-group ic-form-group">
                            <key>
                                <span class="ic-step-number">3</span>
                                Seguidamente, ingrese una descripción para el archivo <span
                                    class="ic-small italic">(opcional)</span>
                            </key>
                            <p class="help-block"></p>
                            <div class="row">
                                <div class="col-md-12">
                                    <textarea class="form-control" id="modelo-descripcion" name="descripcion" rows="3"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="form-group ic-form-group">
                            <key><span class="ic-step-number">4</span>Luego, define si el archivo estará activo</key>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <key class="radio-inline">
                                            <input type="radio" name="radioestado" id="estadoactivo"
                                                   checked>
                                            <span class="ic-small">Activo</span>
                                        </key>
                                        <key class="radio-inline">
                                            <input type="radio" name="radioestado" id="estadoinactivo">
                                            <span class="ic-small">Inactivo</span>
                                        </key>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="demo-wrapper html5-progress-bar">
                            <div class="progress-bar-wrapper">
                                <progress id="progressbar" value="0" max="100"></progress>
                                <span class="progress-value">0%</span>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn green" data-ng-click="vm.salvarModelo()">Guardar</button>
                <button type="button" class="btn red" data-dismiss="modal">Cancelar</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>

<div class="modal fade" id="modal-tarea-detalle" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header blue-hoki">
                <button aria-hidden="true" data-dismiss="modal" class="close" type="button"></button>
                <h4 class="modal-title" id="titulo-modal"></h4>
            </div>
            <div class="modal-body">
                <h5 id="tarea-descripcion"></h5>
                <h5 id="tarea-codigo"></h5>
                <h5 id="tarea-criticidad"></h5>
                <h5 id="tarea-cargo"></h5>
                <fieldset>
                    <legend>Documentos</legend>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="space20"></div>
                            <table class="table table-advance table-bordered table-hover table-striped"
                                   id="table-modelos-tarea">
                                <thead>
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Descripción</th>
                                        <th class="text-center">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr data-ng-repeat="item in tarea.modelos">
                                        <td></td>
                                        <td></td>
                                        <td class="text-center">
                                            <a class="btn btn-icon-only yellow download table-action" href="uploads/" target="_blank" data-original-title="" title="">
                                                <i class="fa fa-download fa-fw"></i>
                                            </a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </fieldset>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn red" data-dismiss="modal">Cerrar</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>

<!-- Modal -->
<div data-ng-include="vm.urlPath + '/bundles/admin/app/layout/modal-eliminar.html'"></div>
<!-- END PAGE -->
<!-- END MAIN CONTENT -->
<!-- BEGIN MAIN JS & CSS -->
<script>

</script>
<!-- BEGIN MAIN JS & CSS -->